{"version":3,"sources":["types.ts","misc/Footer.tsx","misc/GoogleAnalytics.ts","ICLSchema.ts","db.ts","matrix/data.ts","matrix/components.tsx","formulas.ts","matrix/VaultDistributionRows.tsx","matrix/VaultStatRows.tsx","matrix/index.tsx","misc/NavBar.tsx","normality/linear-gauge/index.ts","normality/Gauge.tsx","normality/Histogram.tsx","normality/index.tsx","util.ts","patient/FieldWithUnit.tsx","patient/Biometry.tsx","patient/CorneaProfile.tsx","patient/ICLPower.tsx","patient/Info.tsx","patient/SpectacleRefraction.tsx","patient/index.tsx","regression/formulas.ts","regression/VaultPrediction.tsx","regression/VaultProbability.tsx","regression/index.tsx","misc/TabLinks.tsx","ICLContainer.tsx","App.tsx","index.tsx"],"names":["PreviousSurgery","INITIAL_VALUES","patient","name","dateOfBirth","eye","this","d","Date","isNaN","getTime","diff","differenceInYears","now","biometry","ata","wtw","clr","acd","acan","acat","corneaProfile","kaf","kas","kpf","kps","axisaf","axisas","axispf","axisps","cct","previousSurgery","none","spectacleRefraction","sphere","cylindre","axis","vertex","Footer","className","style","fontSize","color","href","process","target","rel","GA","init","ReactGA","initialize","pageview","window","location","pathname","search","CLR_MIN","CLR_MAX","ACA_MAX","KA_MIN","KA_MAX","AXISA_MAX","REQUIRED_ERROR","formatError","min","max","ICLSchema","Yup","shape","optional","typeError","required","DATA_POINTS","csv","split","reduce","memo","row","map","col","Number","filter","mapCsvToRows","age","iclSize","iclSe","aca","vault","keratometry","VALUES","ATA","point","CLR","ACD","ACA","WTW","AGE","getHistogramData","source","Math","apply","step","data","Array","from","keys","i","to","count","forEach","value","item","find","el","HISTOGRAM_DATA","NUM_DATA_POINTS","length","LENS_SIZE_SMALL","label","id","LENS_SIZE_MEDIUM","LENS_SIZE_LARGE","LENS_SIZES","LENS_SIZES_MAP","small","medium","large","MYOPIA_LEVELS","title","Infinity","getDataPoints","lens","myopia","dataPoints","filterFlatRows","memoLens","memoMyopia","level","filterPoint","MatrixRow","values","scope","val","index","DividerRow","colSpan","round","decimals","pow","adjustCct","calcRadiusAnterior","calcPAntCornea","calcPPostCornea","calcRadiusPosterior","calcVergence","l0exit","iclInputs","sr","l1exit","l2exit","calcICLPower","l1exit_","l2exit_","calcPiclCylindre","calcICLCylindre","calcPiclSphere","calcICLSphericalEquivalent","se","cylinder","calcPiclSphericalEquivalent","getVaultDistribution","range","points","undefined","countByVaultRange","FORMATTERS","PercentVaultSizeRow","a","formatVaultSizeTexts","VAULT_SIZE_RANGES","VaultDistributionRows","getVaultVals","reducer","lessThan","b","greaterThan","getVaultMaxMin","comparator","VaultSizeRow","VAULT_STATS","func","VaultStatRows","stat","getNumEyes","rows","LensHeaderCol","MyopiaHeaderCol","MyopiaHeaderColGroup","Matrix","size","acc","NavBar","resetForm","type","onClick","defaultZones","defaultPointer","height","width","createDiv","styles","div","document","createElement","Object","key","setProperty","LinearGauge","htmlElement","zones","zoneHeight","pointer","container","divisions","divisionHeight","subDivisionHeight","subDivisions","valuePercent","pointerSvg","svg","createElementNS","setAttribute","triangle","appendChild","createPointer","floor","totalSubDivisions","fill","_","sub","subDivision","position","top","left","createSubDivision","division","createDivision","divisionColor","display","renderPointer","renderSubDivisions","renderDivisions","z","zone","flex","createZone","childNodes","node","removeChild","QUANTILES","getComputedStyle","body","getPropertyValue","buildZones","quantiles","qq","q","quantile","sorted","sort","pos","base","rest","Gauge","useRef","useLayoutEffect","current","x","setOptions","dispose","marginLeft","marginRight","ref","am4core","queue","Histogram","chart","am4charts","t","titles","create","text","marginBottom","categoryAxis","xAxes","push","dataFields","category","renderer","grid","template","minGridDistance","valueAxis","yAxes","series","stroke","columns","trim","valueY","categoryX","tooltipText","Graph","histogramSeries","gaugeValues","GRAPH_CONFIGS","arg","Normality","args","config","getClassName","error","touched","invalid","valid","join","UNITS","Map","UnitSufix","unit","get","FieldWithUnit","placeholder","disabled","htmlFor","autoComplete","component","Biometry","errors","CorneaProfile","as","ICLPower","Info","maxLength","SpectacleRefraction","Patient","otherProps","RegressionLensSizes","vaultPredictionVal0","probExpVal0","probExpVal1","compression","lensSize","vaultPrediction","ri","lensSizeId","vaultPredictionVal1","cornea2endothelium","probability","exp","probExpFactor0","probExpFactor1","VaultPrediction","VaultProbability","Regression","LINKS","TabLinks","link","exact","activeClassName","TabContent","path","ICLContainer","initialValues","validationSchema","onSubmit","hashType","App","Sentry","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.86697131.chunk.js","sourcesContent":["import { differenceInYears } from 'date-fns';\n\nexport type Eye = 'left' | 'right';\n\nexport enum PreviousSurgery {\n  none = 'None',\n  myopia = 'Myopia',\n  hyperopia = 'Hyperopia'\n}\n\nexport interface PatientInfoInterface {\n  name: string;\n  dateOfBirth: string;\n  eye: Eye;\n  age(): number;\n}\n\nexport class PatientInfo implements PatientInfoInterface {\n  name: string;\n  dateOfBirth: string;\n  eye: Eye;\n\n  age(): number {\n    if (!this.dateOfBirth) {\n      return 0;\n    }\n    const d: Date = new Date(this.dateOfBirth);\n    if (isNaN(d.getTime())) {\n      return 0;\n    }\n    const diff: number = differenceInYears(new Date(Date.now()), d);\n    return diff < 0 ? 0 : diff;\n  }\n\n  constructor({\n    name,\n    dateOfBirth,\n    eye\n  }: {\n    name: string;\n    dateOfBirth: string;\n    eye: Eye;\n  }) {\n    this.name = name;\n    this.dateOfBirth = dateOfBirth;\n    this.eye = eye;\n  }\n}\n\nexport interface Biometry {\n  ata: number;\n  wtw: number;\n  clr: number;\n  acd: number;\n  acan: number;\n  acat: number;\n}\n\nexport interface CorneaProfile {\n  kaf: number;\n  kas: number;\n  kpf: number;\n  kps: number;\n  axisaf: number;\n  axisas: number;\n  axispf: number;\n  axisps: number;\n  cct: number;\n  previousSurgery: PreviousSurgery;\n}\n\nexport interface SpectacleRefraction {\n  sphere: number;\n  cylindre: number;\n  axis: number;\n  vertex: number;\n}\n\nexport interface ICLInputs {\n  patient: PatientInfo;\n  biometry: Biometry;\n  corneaProfile: CorneaProfile;\n  spectacleRefraction: SpectacleRefraction;\n}\n\nexport const INITIAL_VALUES: ICLInputs = {\n  patient: new PatientInfo({\n    name: '',\n    dateOfBirth: '',\n    eye: 'left'\n  }),\n  biometry: {\n    ata: 0,\n    wtw: 0,\n    clr: 0,\n    acd: 0,\n    acan: 0,\n    acat: 0\n  },\n  corneaProfile: {\n    kaf: 0,\n    kas: 0,\n    kpf: 0,\n    kps: 0,\n    axisaf: 0,\n    axisas: 0,\n    axispf: 0,\n    axisps: 0,\n    cct: 0,\n    previousSurgery: PreviousSurgery.none\n  },\n  spectacleRefraction: {\n    sphere: 0,\n    cylindre: 0,\n    axis: 0,\n    vertex: 0\n  }\n};\n","export const Footer = () => (\n  <footer\n    className=\"p-3 p-md-5 mt-5 bg-light text-center text-sm-left\"\n    style={{ fontSize: '0.875rem', color: '#63707c' }}\n  >\n    <div className=\"container\">\n      <ul className=\"bd-footer-links pl-0 mb-3\">\n        <li className=\"d-inline-block\">\n          <a\n            href={`https://github.com/ruipinge/icl-calc/releases/tag/v${process.env.REACT_APP_VERSION}`}\n          >\n            {`v${process.env.REACT_APP_VERSION}`}\n          </a>\n        </li>\n        <li className=\"d-inline-block ml-3\">\n          <a href=\"https://github.com/ruipinge/icl-calc/blob/master/README.md#instructions\">\n            Instructions\n          </a>\n        </li>\n        <li className=\"d-inline-block ml-3\">\n          <a href=\"https://github.com/ruipinge/icl-calc/blob/master/README.md#data\">\n            Data\n          </a>\n        </li>\n        <li className=\"d-inline-block ml-3\">\n          <a href=\"https://github.com/ruipinge/icl-calc\">GitHub</a>\n        </li>\n      </ul>\n      <p className=\"mb-0\">\n        Designed and built with love by{' '}\n        <a href=\"https://www.linkedin.com/in/pedro-serra-44697321/\">\n          Pedro Serra\n        </a>{' '}\n        and <a href=\"https://ruipinge.github.io/resume\">Rui Pinge</a>.\n      </p>\n      <p className=\"mb-0\">\n        Available under the{' '}\n        <a\n          href=\"https://github.com/ruipinge/icl-calc/blob/master/LICENSE\"\n          target=\"_blank\"\n          rel=\"license noopener noreferrer\"\n        >\n          MIT License\n        </a>{' '}\n        without any kind of warranty.\n      </p>\n      <p className=\"mb-0\">\n        The authors cannot be held responsible for any consequense of its usage.\n      </p>\n    </div>\n  </footer>\n);\n","import ReactGA from 'react-ga';\n\nconst GA = {\n  init: () => {\n    const isGAEnabled = process.env.NODE_ENV === 'production';\n\n    if (isGAEnabled) {\n      ReactGA.initialize('UA-212134595-1');\n      ReactGA.pageview(window.location.pathname + window.location.search);\n    }\n\n    return isGAEnabled;\n  }\n};\n\nexport default GA;\n","import * as Yup from 'yup';\n\nconst ATA_MIN = 0,\n  ATA_MAX = 20,\n  WTW_MIN = 0,\n  WTW_MAX = 20,\n  CLR_MIN = -1000,\n  CLR_MAX = 1000,\n  ACD_MIN = 2.7,\n  ACD_MAX = 6.0,\n  ACA_MIN = 0,\n  ACA_MAX = 70,\n  KA_MIN = 30,\n  KA_MAX = 55,\n  AXISA_MIN = 0,\n  AXISA_MAX = 180,\n  CCT_MIN = 300,\n  CCT_MAX = 700,\n  SPHERE_MIN = -25,\n  SPHERE_MAX = 0,\n  CYLINDRE_MIN = -8,\n  CYLINDRE_MAX = 0,\n  AXIS_MIN = 0,\n  AXIS_MAX = 180,\n  VERTEX_MIN = 8,\n  VERTEX_MAX = 15,\n  INVALID_ERROR = 'Invalid value.',\n  REQUIRED_ERROR = 'Required value.';\n\nconst formatError = (min: number, max: number) =>\n  `${INVALID_ERROR} [${min}, ${max}]`;\n\nexport const ICLSchema = Yup.object().shape({\n  patient: Yup.object().shape({\n    dateOfBirth: Yup.date().optional().typeError('Invalid date. (yyyy-mm-dd)')\n  }),\n  biometry: Yup.object().shape({\n    ata: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(ATA_MIN, formatError(ATA_MIN, ATA_MAX))\n      .max(ATA_MAX, formatError(ATA_MIN, ATA_MAX)),\n    wtw: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(WTW_MIN, formatError(WTW_MIN, WTW_MAX))\n      .max(WTW_MAX, formatError(WTW_MIN, WTW_MAX)),\n    clr: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(CLR_MIN, formatError(CLR_MIN, CLR_MAX))\n      .max(CLR_MAX, formatError(CLR_MIN, CLR_MAX)),\n    acd: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(ACD_MIN, formatError(ACD_MIN, ACD_MAX))\n      .max(ACD_MAX, formatError(ACD_MIN, ACD_MAX)),\n    acan: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(ACA_MIN, formatError(ACA_MIN, ACA_MAX))\n      .max(ACA_MAX, formatError(ACA_MIN, ACA_MAX)),\n    acat: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(ACA_MIN, formatError(ACA_MIN, ACA_MAX))\n      .max(ACA_MAX, formatError(ACA_MIN, ACA_MAX))\n  }),\n  corneaProfile: Yup.object().shape({\n    kaf: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(KA_MIN, formatError(KA_MIN, KA_MAX))\n      .max(KA_MAX, formatError(KA_MIN, KA_MAX)),\n    kas: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(KA_MIN, formatError(KA_MIN, KA_MAX))\n      .max(KA_MAX, formatError(KA_MIN, KA_MAX)),\n    axisaf: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(AXISA_MIN, formatError(AXISA_MIN, AXISA_MAX))\n      .max(AXISA_MAX, formatError(AXISA_MIN, AXISA_MAX)),\n    axisas: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(AXISA_MIN, formatError(AXISA_MIN, AXISA_MAX))\n      .max(AXISA_MAX, formatError(AXISA_MIN, AXISA_MAX)),\n    cct: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(CCT_MIN, formatError(CCT_MIN, CCT_MAX))\n      .max(CCT_MAX, formatError(CCT_MIN, CCT_MAX))\n  }),\n  spectacleRefraction: Yup.object().shape({\n    sphere: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(SPHERE_MIN, formatError(SPHERE_MIN, SPHERE_MAX))\n      .max(SPHERE_MAX, formatError(SPHERE_MIN, SPHERE_MAX)),\n    cylindre: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(CYLINDRE_MIN, formatError(CYLINDRE_MIN, CYLINDRE_MAX))\n      .max(CYLINDRE_MAX, formatError(CYLINDRE_MIN, CYLINDRE_MAX)),\n    axis: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(AXIS_MIN, formatError(AXIS_MIN, AXIS_MAX))\n      .max(AXIS_MAX, formatError(AXIS_MIN, AXIS_MAX)),\n    vertex: Yup.number()\n      .required(REQUIRED_ERROR)\n      .min(VERTEX_MIN, formatError(VERTEX_MIN, VERTEX_MAX))\n      .max(VERTEX_MAX, formatError(VERTEX_MIN, VERTEX_MAX))\n  })\n});\n","import raw from 'raw.macro';\n\nconst CSV = raw('./data.csv');\n\nexport interface DataPoint {\n  age: number;\n  iclSize: number;\n  iclSe: number;\n  acd: number;\n  cct: number;\n  ata: number;\n  clr: number;\n  aca: number;\n  vault: number;\n  wtw: number;\n  keratometry: number;\n}\n\nexport const mapCsvToRows = (csv: string): number[][] =>\n  csv\n    .split('\\n')\n    .reduce(\n      (memo, row) => [\n        ...memo,\n        row.split(';').map((col: string) => Number(col))\n      ],\n      [] as number[][]\n    )\n    .filter((row) => !!row[0] && !isNaN(row[0]));\n\nexport const mapRowsToDataPoint = (rows: number[][]): DataPoint[] =>\n  rows.map((row) => ({\n    age: row[0],\n    iclSize: row[1],\n    iclSe: row[2],\n    acd: row[3],\n    cct: row[4],\n    ata: row[5],\n    clr: row[6],\n    aca: row[7],\n    vault: row[8],\n    wtw: row[9],\n    keratometry: row[10]\n  }));\n\nconst mapCsvToDataPoint = (csv: string): DataPoint[] =>\n  mapRowsToDataPoint(mapCsvToRows(csv));\n\nexport const DATA_POINTS: DataPoint[] = mapCsvToDataPoint(CSV);\n\nexport const VALUES = {\n  ATA: DATA_POINTS.map((point) => point.ata),\n  CLR: DATA_POINTS.map((point) => point.clr),\n  ACD: DATA_POINTS.map((point) => point.acd),\n  ACA: DATA_POINTS.map((point) => point.aca),\n  WTW: DATA_POINTS.map((point) => point.wtw),\n  AGE: DATA_POINTS.map((point) => point.age)\n};\n\nconst MAX_COLS = 10;\n\nexport interface HistogramEntry {\n  from: number;\n  to: number;\n  count: number;\n}\nconst getHistogramData = (source: number[]): HistogramEntry[] => {\n  // Init\n  const min = Math.min.apply(null, source);\n  const max = Math.max.apply(null, source);\n  const range = max - min;\n  const step = range / MAX_COLS;\n\n  // Create items\n  const data = Array.from(Array(MAX_COLS).keys()).map((i) => {\n    const from = min + i * step;\n    const to = min + (i + 1) * step;\n    return {\n      from: from,\n      to: to,\n      count: 0\n    };\n  });\n\n  // Calculate range of the values\n  source.forEach((value) => {\n    const item = data.find((el) => value >= el.from && value <= el.to);\n    item && item.count++;\n  });\n\n  return data;\n};\n\nexport const HISTOGRAM_DATA = {\n  ata: getHistogramData(VALUES.ATA),\n  clr: getHistogramData(VALUES.CLR),\n  acd: getHistogramData(VALUES.ACD),\n  aca: getHistogramData(VALUES.ACA),\n  wtw: getHistogramData(VALUES.WTW),\n  age: getHistogramData(VALUES.AGE)\n};\n","import { DATA_POINTS, DataPoint } from '../db';\n\nconst ATA_DEVIATION: number = 0.1; // millimetres\nconst CLR_DEVIATION: number = 100; // micrometres\n\nexport const NUM_DATA_POINTS = DATA_POINTS.length;\n\nexport interface VaultRange {\n  min?: number;\n  max?: number;\n}\n\nexport type LensSizeId = 'small' | 'medium' | 'large';\nexport interface LensSize {\n  id: LensSizeId;\n  label: string;\n  value: number;\n}\n\nexport const LENS_SIZE_SMALL: LensSize = {\n  label: '12.6 mm',\n  id: 'small',\n  value: 12.6\n};\nexport const LENS_SIZE_MEDIUM: LensSize = {\n  label: '13.2 mm',\n  id: 'medium',\n  value: 13.2\n};\nexport const LENS_SIZE_LARGE: LensSize = {\n  label: '13.7 mm',\n  id: 'large',\n  value: 13.7\n};\n\nexport const LENS_SIZES: LensSize[] = [\n  LENS_SIZE_SMALL,\n  LENS_SIZE_MEDIUM,\n  LENS_SIZE_LARGE\n];\n\ntype LensSizesType = {\n  [key in LensSizeId]: LensSize;\n};\n\nexport const LENS_SIZES_MAP: LensSizesType = {\n  small: LENS_SIZE_SMALL,\n  medium: LENS_SIZE_MEDIUM,\n  large: LENS_SIZE_LARGE\n};\n\ntype MyopiaId = 'low' | 'moderate' | 'high';\ninterface MyopiaLevel {\n  id: MyopiaId;\n  label: string;\n  title: string;\n  min: number;\n  max: number;\n}\nexport const MYOPIA_LEVELS: MyopiaLevel[] = [\n  {\n    id: 'low',\n    label: 'Low',\n    title: 'Spherical Equivalent (SE) less than -6 dpt',\n    min: -6,\n    max: Infinity\n  },\n  {\n    id: 'moderate',\n    label: 'Moderate',\n    title: 'Spherical Equivalent (SE) between -6 dpt and -12 dpt',\n    min: -12,\n    max: -6\n  },\n  {\n    id: 'high',\n    label: 'High',\n    title: 'Spherical Equivalent (SE) greater than -12 dpt',\n    min: -Infinity,\n    max: -12\n  }\n];\n\nexport interface MatrixFilter {\n  readonly ata: number;\n  readonly clr: number;\n  readonly dataPoints?: DataPoint[];\n}\n\ninterface CacheEntry {\n  lens: LensSize;\n  myopia: MyopiaLevel;\n  dataPoints?: DataPoint[];\n}\n\nexport const getDataPoints = ({\n  lens,\n  myopia,\n  dataPoints = DATA_POINTS\n}: CacheEntry): DataPoint[] =>\n  dataPoints.filter(\n    (point) =>\n      lens.value === point.iclSize &&\n      myopia.min <= point.iclSe &&\n      point.iclSe < myopia.max\n  );\n\nexport const filterPoint = ({\n  ata,\n  clr,\n  point\n}: {\n  ata: number;\n  clr: number;\n  point: DataPoint;\n}) =>\n  ata >= point.ata - ATA_DEVIATION &&\n  ata <= point.ata + ATA_DEVIATION &&\n  clr >= point.clr - CLR_DEVIATION && // clr in db is in micrometres\n  clr <= point.clr + CLR_DEVIATION; // clr in db is in micrometres\n\nexport const filterFlatRows = ({\n  ata,\n  clr,\n  dataPoints = DATA_POINTS\n}: MatrixFilter): DataPoint[][] =>\n  LENS_SIZES.reduce(\n    (memoLens, lens) => [\n      ...memoLens,\n      ...MYOPIA_LEVELS.reduce(\n        (memoMyopia, level) => [\n          ...memoMyopia,\n          ...[\n            getDataPoints({\n              lens: lens,\n              myopia: level,\n              dataPoints: dataPoints\n            }).filter((point: DataPoint) => filterPoint({ ata, clr, point }))\n          ]\n        ],\n        [] as DataPoint[][]\n      )\n    ],\n    [] as DataPoint[][]\n  );\n","import { LENS_SIZES, MYOPIA_LEVELS } from './data';\n\nexport const MatrixRow = ({\n  label,\n  title,\n  values\n}: {\n  label: string;\n  title: string;\n  values: number[];\n}) => (\n  <tr>\n    <th scope=\"row\" title={title}>\n      {label}\n    </th>\n    {values.map((val, index) => (\n      <td key={index} className=\"text-right\">\n        {val}\n      </td>\n    ))}\n  </tr>\n);\n\nexport const DividerRow = () => (\n  <tr className=\"table-bordered\">\n    <td colSpan={LENS_SIZES.length * MYOPIA_LEVELS.length + 1} />\n  </tr>\n);\n","import { CorneaProfile, ICLInputs, PreviousSurgery } from './types';\n\nexport const round = (val: number, decimals: number = 2) =>\n  Math.round(val * Math.pow(10, decimals)) / Math.pow(10, decimals);\n\n/**\n * Constants\n */\nconst nAir = 1.0;\nconst nCornea = 1.376;\nconst nAqueous = 1.336;\nconst vault = 500 * 1e-3;\nconst ratioCorneaNormal = 0.84;\n\n/**\n * Transformations\n */\nconst adjustVertex = (vertex: number) => vertex * 1e-3;\nconst adjustCct = (cct: number) => cct * 1e-6;\nconst calcSe = ({ sphere, cylinder }: { sphere: number; cylinder: number }) =>\n  sphere + cylinder / 2;\nconst calcKmAnt = ({ kaf, kas }: { kaf: number; kas: number }) =>\n  (kaf + kas) / 2;\nconst calcRadiusAnterior = ({ kaf, kas }: { kaf: number; kas: number }) =>\n  (1.3375 - 1) / calcKmAnt({ kaf, kas });\n\n/**\n * Posterior Cornea\n */\nexport const calcRadiusPosterior = (corneaProfile: CorneaProfile) => {\n  // If user inserts K Post Flt & K Post Stp then\n  if (corneaProfile.kpf && corneaProfile.kps) {\n    const kmPost = (corneaProfile.kpf + corneaProfile.kps) / 2;\n    return (1.376 - 1.336) / kmPost;\n  }\n\n  // Else if user does not insert K Post Flt & K Post Stp AND Corneal refractive Surgery is No Treatment\n  if (corneaProfile.previousSurgery === PreviousSurgery.none) {\n    return (\n      calcRadiusAnterior({ kaf: corneaProfile.kaf, kas: corneaProfile.kas }) *\n      ratioCorneaNormal\n    );\n  }\n\n  // Else if user does not insert K Post Flt & K Post Stp AND Corneal refractive Surgery is Myopia or Hyperopia\n  // TODO: And display a Warning:\n  // \"ICL Power calculation may not be accurate because cornea surface ratio used may not reflect the patient’s corneal geometry, consider introducing the posterior corneal curvatures\"\n  return (\n    calcRadiusAnterior({ kaf: corneaProfile.kaf, kas: corneaProfile.kas }) *\n    ratioCorneaNormal\n  );\n};\n\n/**\n * Calculating True cornea power\n */\nconst calcPAntCornea = ({ kaf, kas }: { kaf: number; kas: number }) =>\n  (1.376 - 1) / calcRadiusAnterior({ kaf, kas });\nconst calcPPostCornea = (corneaProfile: CorneaProfile) =>\n  (1.336 - 1.376) / calcRadiusPosterior(corneaProfile);\n\n/**\n * Vergence at the ICL plane\n */\nexport const calcVergence = (l0exit: number, iclInputs: ICLInputs) => {\n  const sr = iclInputs.spectacleRefraction;\n  const corneaProfile = iclInputs.corneaProfile;\n  const biometry = iclInputs.biometry;\n\n  const l1entrance = l0exit / (1 - (adjustVertex(sr.vertex) * l0exit) / nAir);\n  const l1exit = l1entrance + calcPAntCornea(corneaProfile);\n  const l2entrance =\n    l1exit / (1 - (adjustCct(corneaProfile.cct) * l1exit) / nCornea);\n  const l2exit = l2entrance + calcPPostCornea(corneaProfile);\n  return l2exit / (1 - ((biometry.acd - vault) * 1e-3 * l2exit) / nAqueous);\n};\n\n/**\n * ICL Power\n */\nexport const calcICLPower = (iclInputs: ICLInputs) => {\n  const corneaProfile = iclInputs.corneaProfile;\n  const biometry = iclInputs.biometry;\n\n  const l1exit_ = calcPAntCornea(corneaProfile);\n  const l2entrance_ =\n    l1exit_ / (1 - (adjustCct(corneaProfile.cct) * l1exit_) / nCornea);\n  const l2exit_ = l2entrance_ + calcPPostCornea(corneaProfile);\n  return l2exit_ / (1 - ((biometry.acd - vault) * 1e-3 * l2exit_) / nAqueous);\n};\n\n/**\n * Calculate the ICL SE\n */\nexport const calcPiclSphericalEquivalent = (iclInputs: ICLInputs) => {\n  const sr = iclInputs.spectacleRefraction;\n  const se = calcSe({ sphere: sr.sphere, cylinder: sr.cylindre });\n  return calcVergence(se, iclInputs) - calcICLPower(iclInputs);\n};\n\n/**\n * Calculate the ICL Sphere Meridian\n */\nexport const calcPiclSphere = (iclInputs: ICLInputs) => {\n  const sr = iclInputs.spectacleRefraction;\n  return calcVergence(sr.sphere, iclInputs) - calcICLPower(iclInputs);\n};\n\n/**\n * Calculate the ICL Cylinder Meridian\n */\nexport const calcPiclCylindre = (iclInputs: ICLInputs) => {\n  const sr = iclInputs.spectacleRefraction;\n  return (\n    calcVergence(sr.sphere + sr.cylindre, iclInputs) - calcICLPower(iclInputs)\n  );\n};\n\nexport const calcICLSphere = (iclInputs: ICLInputs) =>\n  round(calcPiclCylindre(iclInputs));\n\nexport const calcICLCylindre = (iclInputs: ICLInputs) =>\n  round(calcPiclSphere(iclInputs) - calcPiclCylindre(iclInputs));\n\nexport const calcICLSphericalEquivalent = (iclInputs: ICLInputs) =>\n  round(calcPiclSphericalEquivalent(iclInputs));\n\nexport const calcICLAxis = (axis: number) => {\n  if (axis >= 0 && axis <= 90) {\n    return round(axis + 90, 1);\n  }\n\n  if (axis > 90 && axis <= 180) {\n    return round(axis - 90, 1);\n  }\n\n  return round(axis, 1);\n};\n","import { MatrixFilter, VaultRange, filterFlatRows } from './data';\n\nimport { DataPoint } from '../db';\nimport { MatrixRow } from './components';\nimport { round } from '../formulas';\n\nexport const countByVaultRange = ({\n  points,\n  range\n}: {\n  points: DataPoint[];\n  range: VaultRange;\n}): number =>\n  points.filter((point) => {\n    if (range.min !== undefined && range.max !== undefined) {\n      return range.min <= point.vault && point.vault < range.max;\n    }\n    if (range.min !== undefined) {\n      return range.min <= point.vault;\n    }\n    if (range.max !== undefined) {\n      return point.vault < range.max;\n    }\n    return false;\n  }).length;\n\nexport const getVaultDistribution = ({\n  filter,\n  range\n}: {\n  filter: MatrixFilter;\n  range: VaultRange;\n}): number[] =>\n  filterFlatRows(filter).map((points) =>\n    points.length !== 0\n      ? round((100 * countByVaultRange({ points, range })) / points.length, 1)\n      : 0\n  );\n\ninterface VaultDestributionTexts {\n  label: string;\n  title: string;\n}\n\nconst FORMATTERS = {\n  minMax: (min: number, max: number) => ({\n    title: `Percentage of Eyes with Vault size between ${min} and ${max} micrometres`,\n    label: `% ${min} < Vault < ${max} (μm)`\n  }),\n  min: (min: number) => ({\n    title: `Percentage of Eyes with Vault size greater or equal than ${min} micrometres`,\n    label: `% ${min} < Vault (μm)`\n  }),\n  max: (max: number) => ({\n    title: `Percentage of Eyes with Vault size less than ${max} micrometres`,\n    label: `% Vault < ${max} (μm)`\n  }),\n  empty: {\n    label: '',\n    title: ''\n  }\n};\n\nexport const formatVaultSizeTexts = (\n  range: VaultRange\n): VaultDestributionTexts => {\n  if (range.min !== undefined && range.max !== undefined) {\n    return FORMATTERS.minMax(range.min, range.max);\n  }\n  if (range.min !== undefined) {\n    return FORMATTERS.min(range.min);\n  }\n  if (range.max !== undefined) {\n    return FORMATTERS.max(range.max);\n  }\n  return FORMATTERS.empty;\n};\n\nconst PercentVaultSizeRow = ({\n  filter,\n  range\n}: {\n  filter: MatrixFilter;\n  range: VaultRange;\n}) => {\n  const a = formatVaultSizeTexts(range);\n  return (\n    <MatrixRow\n      label={a.label}\n      title={a.title}\n      values={getVaultDistribution({ range, filter })}\n    />\n  );\n};\n\ninterface VaultSizeRange {\n  min?: number;\n  max?: number;\n}\nconst VAULT_SIZE_RANGES: VaultSizeRange[] = [\n  {\n    max: 250\n  },\n  {\n    min: 250,\n    max: 500\n  },\n  {\n    min: 500,\n    max: 750\n  },\n  {\n    min: 750,\n    max: 1000\n  },\n  {\n    min: 1000\n  }\n];\n\nexport const VaultDistributionRows = (filter: MatrixFilter) => (\n  <>\n    {VAULT_SIZE_RANGES.map((range, index) => (\n      <PercentVaultSizeRow filter={filter} range={range} key={index} />\n    ))}\n  </>\n);\n","import { MatrixFilter, filterFlatRows } from './data';\n\nimport { DataPoint } from '../db';\nimport { MatrixRow } from './components';\nimport { round } from '../formulas';\n\nexport const getVaultVals = ({\n  filter,\n  reducer\n}: {\n  filter: MatrixFilter;\n  reducer: (points: DataPoint[]) => number;\n}): number[] =>\n  filterFlatRows(filter).map((points: DataPoint[]) =>\n    round(reducer(points), 5)\n  );\n\nexport const getVaultAverages = (filter: MatrixFilter): number[] =>\n  getVaultVals({\n    filter,\n    reducer: (points: DataPoint[]) =>\n      Math.round(\n        points.reduce((memo, point) => memo + point.vault, 0) / points.length\n      ) || 0\n  });\n\ntype lessGreater = (a: number, b: number) => boolean;\nconst lessThan: lessGreater = (a: number, b: number) => a < b;\nconst greaterThan: lessGreater = (a: number, b: number) => a > b;\n\nexport const getVaultMaxMin = ({\n  filter,\n  comparator\n}: {\n  filter: MatrixFilter;\n  comparator: lessGreater;\n}): number[] =>\n  getVaultVals({\n    filter,\n    reducer: (points: DataPoint[]) =>\n      points.reduce(\n        (memo, point) =>\n          memo === 0 || comparator(memo, point.vault) ? point.vault : memo,\n        0\n      )\n  });\n\nexport const getVaultMaxs = (filter: MatrixFilter): number[] =>\n  getVaultMaxMin({ filter, comparator: lessThan });\n\nexport const getVaultMins = (filter: MatrixFilter): number[] =>\n  getVaultMaxMin({ filter, comparator: greaterThan });\n\nconst VaultSizeRow = ({\n  label,\n  values\n}: {\n  label: string;\n  values: number[];\n}) => (\n  <MatrixRow\n    label={`${label} Vault (μm)`}\n    title={`${label} Vault size in micrometres`}\n    values={values}\n  />\n);\n\ninterface VaultStat {\n  label: string;\n  func: (filter: MatrixFilter) => number[];\n}\nconst VAULT_STATS: VaultStat[] = [\n  {\n    label: 'Average',\n    func: getVaultAverages\n  },\n  {\n    label: 'Minimum',\n    func: getVaultMins\n  },\n  {\n    label: 'Maximum',\n    func: getVaultMaxs\n  }\n];\n\nexport const VaultStatRows = (filter: MatrixFilter) => (\n  <>\n    {VAULT_STATS.map((stat) => (\n      <VaultSizeRow\n        key={stat.label}\n        label={stat.label}\n        values={stat.func(filter)}\n      />\n    ))}\n  </>\n);\n","import { DividerRow, MatrixRow } from './components';\nimport {\n  LENS_SIZES,\n  MYOPIA_LEVELS,\n  MatrixFilter,\n  NUM_DATA_POINTS,\n  filterFlatRows\n} from './data';\n\nimport { DataPoint } from '../db';\nimport { VaultDistributionRows } from './VaultDistributionRows';\nimport { VaultStatRows } from './VaultStatRows';\n\nexport const getNumEyes = (filter: MatrixFilter): number[] =>\n  filterFlatRows(filter).map((rows: DataPoint[]) => rows.length);\n\nconst LensHeaderCol = ({ label }: { label: string }) => (\n  <th scope=\"col\" colSpan={MYOPIA_LEVELS.length} className=\"text-right\">\n    {label}\n  </th>\n);\n\nconst MyopiaHeaderCol = ({\n  label,\n  title\n}: {\n  label: string;\n  title: string;\n}) => (\n  <th scope=\"col\" className=\"text-right\" title={title}>\n    {label}\n  </th>\n);\n\nconst MyopiaHeaderColGroup = () => (\n  <>\n    {MYOPIA_LEVELS.map((level) => (\n      <MyopiaHeaderCol label={level.label} title={level.title} key={level.id} />\n    ))}\n  </>\n);\n\nexport const Matrix = (filter: MatrixFilter) => (\n  <>\n    <table className=\"table table-bordered table-hover\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Lens Size</th>\n          {LENS_SIZES.map((size) => (\n            <LensHeaderCol label={size.label} key={size.id} />\n          ))}\n        </tr>\n        <tr>\n          <th scope=\"col\">Myopia</th>\n          {LENS_SIZES.map((size) => (\n            <MyopiaHeaderColGroup key={size.id} />\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        <MatrixRow\n          label=\"Number of Eyes\"\n          title=\"Number of Eyes matching the column criteria\"\n          values={getNumEyes(filter)}\n        />\n        <DividerRow />\n        <VaultStatRows {...filter} />\n        <DividerRow />\n        <VaultDistributionRows {...filter} />\n      </tbody>\n    </table>\n    <ul className=\"list-inline\">\n      <li className=\"list-inline-item\">\n        <strong>Angle to Angle (AtA): </strong>\n        {filter.ata} mm.\n      </li>\n      <li className=\"list-inline-item\">\n        <strong>Crystaline Lens Rise (CLR): </strong>\n        {filter.clr * 0.001} mm.\n      </li>\n      <li className=\"list-inline-item\">\n        <strong>Number of matching Eyes: </strong>\n        {getNumEyes(filter).reduce((acc, a) => acc + a, 0)}/{NUM_DATA_POINTS}.\n      </li>\n    </ul>\n  </>\n);\n","export const NavBar = ({ resetForm }: { resetForm: (a?: any) => void }) => (\n  <nav className=\"navbar navbar-expand navbar-dark bg-dark fixed-top\">\n    <div className=\"container\">\n      <a className=\"navbar-brand\" href={process.env.PUBLIC_URL || '/'}>\n        ICL Size Calc\n      </a>\n      <form className=\"form-inline\">\n        <button\n          type=\"button\"\n          className=\"btn btn-danger\"\n          onClick={() => {\n            resetForm();\n          }}\n        >\n          Reset\n        </button>\n      </form>\n    </div>\n  </nav>\n);\n","export type Zone = {\n  readonly min: number;\n  readonly max: number;\n  readonly color: string;\n};\n\nexport type Pointer = {\n  readonly color: string;\n  readonly height: number;\n  readonly width: number;\n};\n\nexport type Options = {\n  readonly divisionColor?: string;\n  readonly divisions?: number;\n  readonly divisionHeight?: number;\n  readonly pointer?: Pointer;\n  readonly subDivisions?: number;\n  readonly subDivisionHeight?: number;\n  readonly value?: number;\n  readonly zones?: Zone[];\n  readonly zoneHeight?: number;\n};\n\nconst defaultZoneHeight = 12;\nconst defaultDivisions = 5;\nconst defaultDivisionHeight = 18;\nconst defaultDivisionColor = '#000000';\nconst defaultSubDivisions = 1;\nconst defaultSubDivisionHeight = 8;\n\nconst defaultZones = [\n  {\n    min: 0,\n    max: 3,\n    color: 'green'\n  },\n  {\n    min: 3,\n    max: 5,\n    color: 'yellow'\n  },\n  {\n    min: 5,\n    max: 6,\n    color: 'red'\n  }\n];\n\nconst defaultPointer = {\n  color: 'red',\n  height: 18,\n  width: 5\n};\n\ntype Style = {\n  readonly [key: string]: string;\n};\n\nconst createDiv = ({ styles = {} }: { readonly styles?: Style }) => {\n  const div = document.createElement('div');\n  Object.keys(styles).forEach((key) => div.style.setProperty(key, styles[key]));\n  return div;\n};\n\nconst createDivision = ({\n  division,\n  divisions,\n  height\n}: {\n  readonly division: number;\n  readonly divisions: number;\n  readonly height: number;\n}) => {\n  const div = createDiv({\n    styles: {\n      position: 'absolute',\n      top: '0px',\n      height: `${height}px`,\n      'border-left': '1px solid #000000'\n    }\n  });\n  if (division < divisions) {\n    div.style.setProperty('left', `${(division / divisions) * 100}%`);\n  } else {\n    div.style.setProperty('right', '0%');\n  }\n  return div;\n};\n\nconst createSubDivision = ({\n  subDivision,\n  totalSubDivisions,\n  subDivisionHeight\n}: {\n  readonly subDivision: number;\n  readonly totalSubDivisions: number;\n  readonly subDivisionHeight: number;\n}) => {\n  return createDiv({\n    styles: {\n      position: `absolute`,\n      top: '0px',\n      left: `${(subDivision / totalSubDivisions) * 100}%`,\n      height: `${subDivisionHeight}px`,\n      'border-left': '1px solid #000000'\n    }\n  });\n};\n\nconst createZone = ({\n  zone,\n  height\n}: {\n  readonly zone: Zone;\n  readonly height: number;\n}): HTMLElement => {\n  return createDiv({\n    styles: {\n      height: `${height}px`,\n      flex: `${zone.max - zone.min}`, // TODO: make sure decimals are not used\n      'background-color': zone.color\n    }\n  });\n};\n\nconst createPointer = (pointer: Pointer): SVGElement => {\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  svg.setAttribute('width', `${pointer.width}`);\n  svg.setAttribute('height', `${pointer.height}`);\n  svg.style.setProperty('position', 'absolute');\n\n  const triangle = document.createElementNS(\n    'http://www.w3.org/2000/svg',\n    'polygon'\n  );\n  triangle.setAttribute(\n    'points',\n    `${pointer.width / 2},0 0,${pointer.height} ${pointer.width},${\n      pointer.height\n    }`\n  );\n  triangle.setAttribute('fill', '#ff0000');\n  svg.appendChild(triangle);\n  return svg;\n};\n\nexport class LinearGauge {\n  readonly el: HTMLElement;\n  zones: Zone[];\n  zoneHeight: number;\n  value?: number;\n  pointer: Pointer;\n  container?: HTMLDivElement;\n  divisions: number;\n  divisionHeight: number;\n  subDivisionHeight: number;\n  subDivisions: number;\n\n  constructor(htmlElement: HTMLElement) {\n    this.el = htmlElement;\n    this.zones = [];\n    this.zoneHeight = defaultZoneHeight;\n    this.pointer = defaultPointer;\n    this.divisions = defaultDivisions;\n    this.divisionHeight = defaultDivisionHeight;\n    this.subDivisions = defaultSubDivisions;\n    this.subDivisionHeight = defaultSubDivisionHeight;\n  }\n\n  renderPointer(value?: number) {\n    const min = this.zones[0].min;\n    const max = this.zones[this.zones.length - 1].max;\n\n    if (value !== undefined && value >= min && value <= max) {\n      const totalRange = max - min;\n      const valuePercent = ((value - min) / totalRange) * 100;\n\n      const pointerSvg = createPointer(this.pointer);\n      pointerSvg.style.setProperty(\n        'left',\n        `calc(${valuePercent}% - ${Math.floor(this.pointer.width / 2)}px)`\n      );\n      pointerSvg.style.setProperty('top', `${this.zoneHeight}px`);\n      this.container?.appendChild(pointerSvg);\n    }\n  }\n\n  renderSubDivisions() {\n    const totalSubDivisions = this.divisions * this.subDivisions;\n    Array(totalSubDivisions)\n      .fill(0)\n      .map((_, sub) => sub)\n      .filter((sub) => sub % this.subDivisions !== 0)\n      .map((subDivision) =>\n        createSubDivision({\n          subDivision: subDivision,\n          totalSubDivisions: totalSubDivisions,\n          subDivisionHeight: this.subDivisionHeight\n        })\n      )\n      .forEach((div) => this.container?.appendChild(div));\n  }\n\n  renderDivisions() {\n    Array(this.divisions + 1)\n      .fill(0)\n      .map((_, division) =>\n        createDivision({\n          division: division,\n          divisions: this.divisions,\n          height: this.divisionHeight\n        })\n      )\n      .forEach((div) => this.container?.appendChild(div));\n  }\n\n  setOptions({\n    divisionColor = defaultDivisionColor,\n    divisions = defaultDivisions,\n    divisionHeight = defaultDivisionHeight,\n    pointer = defaultPointer,\n    subDivisions = defaultSubDivisions,\n    subDivisionHeight = defaultSubDivisionHeight,\n    value,\n    zones = defaultZones,\n    zoneHeight = defaultZoneHeight\n  }: Options): LinearGauge {\n    const container = createDiv({\n      styles: {\n        'border-top': `1px solid ${divisionColor}`,\n        display: 'flex',\n        position: 'relative',\n        height: `${Math.max(divisionHeight, zoneHeight + pointer.height)}px`\n      }\n    });\n\n    this.container = container;\n    this.zones = zones;\n    this.zoneHeight = zoneHeight;\n    this.pointer = pointer;\n    this.divisions = divisions;\n    this.divisionHeight = divisionHeight;\n    this.subDivisions = subDivisions;\n    this.subDivisionHeight = subDivisionHeight;\n\n    // Pointer\n    this.renderPointer(value);\n\n    // Sub-Divisions\n    this.renderSubDivisions();\n\n    // Divisions\n    this.renderDivisions();\n\n    // Zones\n    zones\n      .map((z) => createZone({ zone: z, height: zoneHeight }))\n      .forEach((d) => container.appendChild(d));\n\n    this.el.appendChild(container);\n\n    return this;\n  }\n\n  dispose(): HTMLElement {\n    this.el.childNodes.forEach((node) => this.el.removeChild(node));\n    // while (this.el.lastChild) {\n    //   this.el.removeChild(this.el.lastChild);\n    // }\n    // this.el.textContent = '';\n    return this.el;\n  }\n}\n","import { LinearGauge, Zone } from './linear-gauge';\nimport { useLayoutEffect, useRef } from 'react';\n\n/**\n * https://stackoverflow.com/questions/48719873/how-to-get-median-and-quartiles-percentiles-of-an-array-in-javascript-or-php\n *\n * @param {number[]} values - Dataset\n * @param {number} quantile - Quantile [0.0, 1.0]\n * @returns {number}\n */\nexport const quantile = (values: number[], quantile: number) => {\n  const sorted = values.sort((a, b) => a - b);\n  const pos = (sorted.length - 1) * quantile;\n  const base = Math.floor(pos);\n  const rest = pos - base;\n  if (sorted[base + 1] !== undefined) {\n    return sorted[base] + rest * (sorted[base + 1] - sorted[base]);\n  }\n  return sorted[base];\n};\n\nexport type Quantile = {\n  readonly value: number;\n  readonly color: string;\n};\n\nconst QUANTILES: Quantile[] = [\n  {\n    value: 0.025,\n    color: getComputedStyle(document.body).getPropertyValue('--danger')\n  },\n  {\n    value: 0.25,\n    color: getComputedStyle(document.body).getPropertyValue('--warning')\n  },\n  {\n    value: 0.75,\n    color: getComputedStyle(document.body).getPropertyValue('--success')\n  },\n  {\n    value: 0.975,\n    color: getComputedStyle(document.body).getPropertyValue('--warning')\n  },\n  {\n    value: 1.0,\n    color: getComputedStyle(document.body).getPropertyValue('--danger')\n  }\n];\n\nexport const buildZones = ({\n  values,\n  quantiles = QUANTILES\n}: {\n  values: number[];\n  quantiles?: Quantile[];\n}): Zone[] => {\n  const qq = quantiles.map((q) => quantile(values, q.value));\n  return quantiles.map((q, index) => {\n    if (index === 0) {\n      return {\n        min: Math.min(...values),\n        max: qq[0],\n        color: q.color\n      };\n    }\n    return {\n      min: qq[index - 1],\n      max: qq[index],\n      color: q.color\n    };\n  });\n};\n\nexport const Gauge = ({\n  value,\n  values\n}: {\n  value: number;\n  values: number[];\n}) => {\n  const container = useRef<HTMLDivElement>(null);\n\n  /* istanbul ignore next */\n  useLayoutEffect(() => {\n    if (container.current === null) {\n      return;\n    }\n\n    let x: LinearGauge = new LinearGauge(container.current);\n    x.setOptions({\n      divisions: 5,\n      subDivisions: 2,\n      zones: buildZones({ values: values }),\n      value: value\n    });\n\n    return () => {\n      x.dispose();\n    };\n  });\n\n  return (\n    <div style={{ marginLeft: '71px', marginRight: '15px' }} ref={container} />\n  );\n};\n","import * as am4charts from '@amcharts/amcharts4/charts';\nimport * as am4core from '@amcharts/amcharts4/core';\n\nimport { useLayoutEffect, useRef } from 'react';\n\nimport { HistogramEntry } from '../db';\n\nam4core.options.queue = true;\n\nexport const Histogram = ({\n  data,\n  title\n}: {\n  data: HistogramEntry[];\n  title: string;\n}) => {\n  const chart = useRef<am4charts.XYChart>();\n  const ref = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    // Create chart instance\n\n    let x: am4charts.XYChart = am4core.create(\n      ref.current || undefined,\n      am4charts.XYChart\n    );\n\n    let t = x.titles.create();\n    t.text = title;\n    t.marginBottom = 22;\n    t.fontSize = '1rem';\n\n    // Add data\n    x.data = data;\n\n    // Create axes\n    const categoryAxis = x.xAxes.push(new am4charts.CategoryAxis());\n    categoryAxis.dataFields.category = 'from';\n    categoryAxis.renderer.grid.template.location = 0;\n    categoryAxis.renderer.minGridDistance = 30;\n\n    const valueAxis = x.yAxes.push(new am4charts.ValueAxis());\n    valueAxis.title.text = 'Number of Eyes';\n    valueAxis.min = 0;\n    valueAxis.max = Math.max(...[100, ...data.map((d) => d.count)]);\n\n    // Create series\n    const series = x.series.push(new am4charts.ColumnSeries());\n    const fill = getComputedStyle(document.body).getPropertyValue(\n      '--secondary' // Bootstrap 4\n    );\n    const stroke = getComputedStyle(document.body).getPropertyValue(\n      '--dark' // Bootstrap 4\n    );\n    series.columns.template.fill = am4core.color(fill.trim());\n    series.columns.template.stroke = am4core.color(stroke.trim());\n    series.dataFields.valueY = 'count';\n    series.dataFields.categoryX = 'from';\n    series.columns.template.tooltipText =\n      'Interval: [bold][[{from}, {to}[[[/]\\nNumber of Eyes: [bold]{count}[/]';\n\n    chart.current = x;\n\n    return () => {\n      x.dispose();\n    };\n  });\n\n  return <div ref={ref} style={{ width: '100%', height: '300px' }} />;\n};\n","import { HISTOGRAM_DATA, HistogramEntry, VALUES } from '../db';\n\nimport { Gauge } from './Gauge';\nimport { Histogram } from './Histogram';\n\nconst Graph = ({\n  title,\n  value,\n  histogramSeries,\n  gaugeValues\n}: {\n  title: string;\n  value: number;\n  histogramSeries: HistogramEntry[];\n  gaugeValues: number[];\n}) => (\n  <>\n    <div className=\"col-md-4\">\n      <Histogram title={title} data={histogramSeries} />\n      <Gauge value={value} values={gaugeValues} />\n    </div>\n  </>\n);\n\ninterface GraphConfig {\n  title: string;\n  data: HistogramEntry[];\n  arg: string;\n  values: number[];\n}\n\nconst GRAPH_CONFIGS: GraphConfig[] = [\n  {\n    title: 'Angle to Angle - AtA (mm)',\n    data: HISTOGRAM_DATA.ata,\n    arg: 'ata',\n    values: VALUES.ATA\n  },\n  {\n    title: 'Crystalline Lens Rise - CLR (μm)',\n    data: HISTOGRAM_DATA.clr,\n    arg: 'clr',\n    values: VALUES.CLR\n  },\n  {\n    title: 'Internal Anterior Chamber Depth - ACD (mm)',\n    data: HISTOGRAM_DATA.acd,\n    arg: 'acd',\n    values: VALUES.ACD\n  },\n  {\n    title: 'Average Anterior Chamber Angle - ACA (º)',\n    data: HISTOGRAM_DATA.aca,\n    arg: 'aca',\n    values: VALUES.ACA\n  },\n  {\n    title: 'White to White - WtW (mm)',\n    data: HISTOGRAM_DATA.wtw,\n    arg: 'wtw',\n    values: VALUES.WTW\n  },\n  {\n    title: 'Age (years)',\n    data: HISTOGRAM_DATA.age,\n    arg: 'age',\n    values: VALUES.AGE\n  }\n];\n\nexport const Normality = ({ ...args }) => (\n  <>\n    <div className=\"row\">\n      {GRAPH_CONFIGS.map((config) => (\n        <Graph\n          title={config.title}\n          histogramSeries={config.data}\n          value={args[config.arg]}\n          gaugeValues={config.values}\n          key={config.arg}\n        />\n      ))}\n    </div>\n  </>\n);\n","export const getClassName = ({\n  error,\n  touched,\n  base = ['form-control'],\n  invalid = ['is-invalid'],\n  valid = []\n}: {\n  error?: string;\n  touched?: boolean;\n  base?: Array<string>;\n  invalid?: Array<string>;\n  valid?: Array<string>;\n}): string => [...base, ...(error && touched ? invalid : valid)].join(' ');\n","import * as React from 'react';\n\nimport { ErrorMessage, Field } from 'formik';\nimport { getClassName } from '../util';\n\ntype Unit = 'mm' | 'nm' | 'º' | 'dpt' | 'μm';\n\nconst UNITS: Map<Unit, string> = new Map([\n  ['mm', 'millimetres'], // 10^(-3) metres\n  ['μm', 'micrometres'], // 10^(-6) metres (aka \"micron\", or \"micra\")\n  ['nm', 'nanometres'], // 10^(-9) metres\n  ['º', 'degrees'],\n  ['dpt', 'dioptres']\n]);\n\ninterface FieldWithUnitProps {\n  label: string;\n  name: string;\n  unit: Unit;\n  touched?: boolean;\n  placeholder?: string;\n  error?: string;\n  value?: number;\n  disabled?: boolean;\n}\n\nconst UnitSufix = ({ unit }: { unit: Unit }) => (\n  <div className=\"input-group-append\">\n    <span className=\"input-group-text\" title={UNITS.get(unit)}>\n      {unit}\n    </span>\n  </div>\n);\n\nexport const FieldWithUnit: React.FC<FieldWithUnitProps> = ({\n  label,\n  name,\n  unit,\n  placeholder,\n  error,\n  touched,\n  value,\n  disabled\n}) => {\n  return (\n    <div className={'form-group row'}>\n      <label htmlFor={name + 'field'} className=\"col-sm-6 col-form-label\">\n        {label}\n      </label>\n      <div className=\"col-sm-6\">\n        <div className=\"input-group\">\n          {disabled ? (\n            <input\n              name={name}\n              value={value}\n              className=\"form-control text-right\"\n              disabled={true}\n            />\n          ) : (\n            <Field\n              type=\"number\"\n              name={name}\n              className={getClassName({\n                error: error,\n                touched: touched,\n                base: ['form-control', 'text-right']\n              })}\n              placeholder={placeholder}\n              autoComplete=\"off\"\n            />\n          )}\n          <UnitSufix unit={unit} />\n          <ErrorMessage\n            name={name}\n            component=\"div\"\n            className=\"invalid-feedback\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { FieldWithUnit } from './FieldWithUnit';\nimport { FormikState } from 'formik';\nimport { ICLInputs } from '../types';\n\nexport const Biometry = ({\n  errors,\n  touched\n}: FormikState<Pick<ICLInputs, 'biometry'>>) => (\n  <div className=\"section-form\">\n    <h4>Biometry</h4>\n    <FieldWithUnit\n      label=\"Angle to Angle (AtA)\"\n      name=\"biometry.ata\"\n      unit=\"mm\"\n      error={errors.biometry?.ata}\n      touched={touched.biometry?.ata}\n    />\n    <FieldWithUnit\n      label=\"White to White (WtW)\"\n      name=\"biometry.wtw\"\n      unit=\"mm\"\n      error={errors.biometry?.wtw}\n      touched={touched.biometry?.wtw}\n    />\n    <FieldWithUnit\n      label=\"Crystaline Lens Rise (CLR)\"\n      name=\"biometry.clr\"\n      unit=\"μm\"\n      error={errors.biometry?.clr}\n      touched={touched.biometry?.clr}\n    />\n    <FieldWithUnit\n      label=\"Internal Anterior Chamber Depth (ACD)\"\n      name=\"biometry.acd\"\n      unit=\"mm\"\n      error={errors.biometry?.acd}\n      touched={touched.biometry?.acd}\n    />\n    <FieldWithUnit\n      label=\"Anterior Chamber Angle nasal (ACAn)\"\n      name=\"biometry.acan\"\n      unit=\"º\"\n      error={errors.biometry?.acan}\n      touched={touched.biometry?.acan}\n    />\n    <FieldWithUnit\n      label=\"Anterior Chamber Angle temporal (ACAt)\"\n      name=\"biometry.acat\"\n      unit=\"º\"\n      error={errors.biometry?.acat}\n      touched={touched.biometry?.acat}\n    />\n  </div>\n);\n","import { Field, FormikState } from 'formik';\nimport { ICLInputs, PreviousSurgery } from '../types';\n\nimport { FieldWithUnit } from './FieldWithUnit';\n\nexport const CorneaProfile = ({\n  errors,\n  touched\n}: FormikState<Pick<ICLInputs, 'corneaProfile'>>) => (\n  <div className=\"section-form\">\n    <h4>Cornea Profile</h4>\n    <FieldWithUnit\n      label=\"Anterior Keratometry Flat (KAntFlt)\"\n      name=\"corneaProfile.kaf\"\n      unit=\"dpt\"\n      error={errors.corneaProfile?.kaf}\n      touched={touched.corneaProfile?.kaf}\n    />\n    <FieldWithUnit\n      label=\"@\"\n      name=\"corneaProfile.axisaf\"\n      unit=\"º\"\n      error={errors.corneaProfile?.axisaf}\n      touched={touched.corneaProfile?.axisaf}\n    />\n    <FieldWithUnit\n      label=\"Anterior Keratometry Steep (KAntStp)\"\n      name=\"corneaProfile.kas\"\n      unit=\"dpt\"\n      error={errors.corneaProfile?.kas}\n      touched={touched.corneaProfile?.kas}\n    />\n    <FieldWithUnit\n      label=\"@\"\n      name=\"corneaProfile.axisas\"\n      unit=\"º\"\n      error={errors.corneaProfile?.axisas}\n      touched={touched.corneaProfile?.axisas}\n    />\n    <FieldWithUnit\n      label=\"Posterior Keratometry Flat (KPostFlt)\"\n      name=\"corneaProfile.kpf\"\n      unit=\"dpt\"\n      error={errors.corneaProfile?.kpf}\n      touched={touched.corneaProfile?.kpf}\n    />\n    <FieldWithUnit\n      label=\"@\"\n      name=\"corneaProfile.axispf\"\n      unit=\"º\"\n      error={errors.corneaProfile?.axispf}\n      touched={touched.corneaProfile?.axispf}\n    />\n    <FieldWithUnit\n      label=\"Posterior Keratometry Steep (KPostStp)\"\n      name=\"corneaProfile.kps\"\n      unit=\"dpt\"\n      error={errors.corneaProfile?.kps}\n      touched={touched.corneaProfile?.kps}\n    />\n    <FieldWithUnit\n      label=\"@\"\n      name=\"corneaProfile.axisps\"\n      unit=\"º\"\n      error={errors.corneaProfile?.axisps}\n      touched={touched.corneaProfile?.axisps}\n    />\n    <FieldWithUnit\n      label=\"Central Corneal Thickness (CCT)\"\n      name=\"corneaProfile.cct\"\n      unit=\"μm\"\n      error={errors.corneaProfile?.cct}\n      touched={touched.corneaProfile?.cct}\n    />\n    <div className={'form-group row mb-4'}>\n      <label\n        htmlFor={'corneaProfile.previousSurgery'}\n        className=\"col-sm-6 col-form-label\"\n      >\n        Previous Corneal Refractive Surgery\n      </label>\n      <div className=\"col-sm-6\">\n        <div className=\"input-group\">\n          <Field\n            as=\"select\"\n            name=\"corneaProfile.previousSurgery\"\n            className=\"form-control\"\n          >\n            {Object.values(PreviousSurgery).map((val) => (\n              <option value={val} key={val}>\n                {val}\n              </option>\n            ))}\n          </Field>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n","import {\n  calcICLAxis,\n  calcICLCylindre,\n  calcICLSphere,\n  calcICLSphericalEquivalent\n} from '../formulas';\n\nimport { FieldWithUnit } from './FieldWithUnit';\nimport { FormikState } from 'formik';\nimport { ICLInputs } from '../types';\n\nexport const ICLPower = ({\n  errors,\n  touched,\n  values\n}: FormikState<ICLInputs>) => (\n  <div>\n    <h4>ICL Power</h4>\n    <FieldWithUnit\n      label=\"Sphere\"\n      name=\"iclSphere\"\n      value={calcICLSphere(values)}\n      unit=\"dpt\"\n      disabled={true}\n    />\n    <FieldWithUnit\n      label=\"Cylindre\"\n      name=\"iclCylindre\"\n      value={calcICLCylindre(values)}\n      unit=\"dpt\"\n      disabled={true}\n    />\n    <FieldWithUnit\n      label=\"Axis\"\n      name=\"iclAxis\"\n      value={calcICLAxis(values.spectacleRefraction.axis)}\n      unit=\"º\"\n      disabled={true}\n    />\n    <FieldWithUnit\n      label=\"Spherical Equivalent (SE)\"\n      value={calcICLSphericalEquivalent(values)}\n      name=\"iclSphericalEquivalent\"\n      unit=\"dpt\"\n      disabled={true}\n    />\n  </div>\n);\n","import { ErrorMessage, Field, FormikState } from 'formik';\n\nimport { ICLInputs } from '../types';\nimport { getClassName } from '../util';\n\nexport const Info = ({\n  errors,\n  values,\n  touched\n}: FormikState<Pick<ICLInputs, 'patient'>>) => (\n  <>\n    <h4>Information</h4>\n    <div className=\"form-row\">\n      <div className=\"form-group col-md-4\">\n        <label htmlFor=\"fieldName\">Name</label>\n        <Field\n          name=\"patient.name\"\n          className=\"form-control\"\n          id=\"fieldName\"\n          placeholder=\"enter patient name\"\n          autoComplete=\"off\"\n        />\n      </div>\n      <div className=\"form-group col-md-2 offset-md-1\">\n        <label htmlFor=\"fieldDateOfBirth\">Date of Birth</label>\n        <Field\n          name=\"patient.dateOfBirth\"\n          className={getClassName({\n            error: errors.patient?.dateOfBirth,\n            touched: touched.patient?.dateOfBirth\n          })}\n          id=\"fieldDateOfBirth\"\n          placeholder=\"yyyy-mm-dd\"\n          autoComplete=\"off\"\n          maxLength={10}\n        />\n        <ErrorMessage\n          name=\"patient.dateOfBirth\"\n          component=\"div\"\n          className=\"invalid-feedback\"\n        />\n      </div>\n      <div className=\"form-group col-md-2\">\n        <label htmlFor=\"fieldAge\">Age</label>\n        <div className=\"input-group\">\n          <input\n            name=\"age\"\n            className=\"form-control text-right\"\n            id=\"fieldAge\"\n            disabled={true}\n            value={values.patient.age()}\n          />\n          <div className=\"input-group-append\">\n            <span className=\"input-group-text\" title=\"years\">\n              years\n            </span>\n          </div>\n        </div>\n      </div>\n      <div className=\"form-group col-md-2 offset-md-1\">\n        <label htmlFor=\"fieldEye\">Eye</label>\n        <Field\n          as=\"select\"\n          name=\"patient.eye\"\n          className=\"form-control\"\n          id=\"fieldEye\"\n        >\n          <option value=\"\">Select...</option>\n          <option value=\"left\">Left</option>\n          <option value=\"right\">Right</option>\n        </Field>\n      </div>\n    </div>\n  </>\n);\n","import { FieldWithUnit } from './FieldWithUnit';\nimport { FormikState } from 'formik';\nimport { ICLInputs } from '../types';\n\nexport const SpectacleRefraction = ({\n  errors,\n  touched\n}: FormikState<Pick<ICLInputs, 'spectacleRefraction'>>) => (\n  <div className=\"section-form\">\n    <h4>Spectacle Refraction</h4>\n    <FieldWithUnit\n      label=\"Sphere\"\n      name=\"spectacleRefraction.sphere\"\n      unit=\"dpt\"\n      error={errors.spectacleRefraction?.sphere}\n      touched={touched.spectacleRefraction?.sphere}\n    />\n    <FieldWithUnit\n      label=\"Cylindre\"\n      name=\"spectacleRefraction.cylindre\"\n      unit=\"dpt\"\n      error={errors.spectacleRefraction?.cylindre}\n      touched={touched.spectacleRefraction?.cylindre}\n    />\n    <FieldWithUnit\n      label=\"Axis\"\n      name=\"spectacleRefraction.axis\"\n      unit=\"º\"\n      error={errors.spectacleRefraction?.axis}\n      touched={touched.spectacleRefraction?.axis}\n    />\n    <FieldWithUnit\n      label=\"Vertex\"\n      name=\"spectacleRefraction.vertex\"\n      unit=\"mm\"\n      error={errors.spectacleRefraction?.vertex}\n      touched={touched.spectacleRefraction?.vertex}\n    />\n  </div>\n);\n","import { Biometry } from './Biometry';\nimport { CorneaProfile } from './CorneaProfile';\nimport { FormikState } from 'formik';\nimport { ICLInputs } from '../types';\nimport { ICLPower } from './ICLPower';\nimport { Info } from './Info';\nimport { SpectacleRefraction } from './SpectacleRefraction';\n\nexport const Patient = ({\n  errors,\n  touched,\n  values,\n  ...otherProps\n}: FormikState<ICLInputs>) => (\n  <>\n    <Info values={values} errors={errors} touched={touched} {...otherProps} />\n    <hr />\n    <div className=\"form-row\">\n      <div className=\"col-md-3\">\n        <Biometry\n          values={values}\n          errors={errors}\n          touched={touched}\n          {...otherProps}\n        />\n      </div>\n      <div className=\"col-md-4 offset-md-1\">\n        <CorneaProfile\n          values={values}\n          errors={errors}\n          touched={touched}\n          {...otherProps}\n        />\n      </div>\n      <div className=\"col-md-3 offset-md-1\">\n        <SpectacleRefraction\n          values={values}\n          errors={errors}\n          touched={touched}\n          {...otherProps}\n        />\n        <ICLPower\n          values={values}\n          errors={errors}\n          touched={touched}\n          {...otherProps}\n        />\n      </div>\n    </div>\n  </>\n);\n","import { LENS_SIZES_MAP, LensSizeId } from '../matrix/data';\n\nexport interface RegressionInfo {\n  acd: number;\n  ata: number;\n  clr: number;\n  se: number;\n  age: number;\n}\n\ninterface RegressionExt {\n  vaultPredictionVal0: number;\n  probExpVal0: number;\n  probExpVal1: number;\n}\n\ntype LensSizeRegressionType = {\n  [key in LensSizeId]: RegressionExt;\n};\n\nexport const RegressionLensSizes: LensSizeRegressionType = {\n  small: {\n    vaultPredictionVal0: 4132.04 - 260.99,\n    probExpVal0: -1.259,\n    probExpVal1: -5.829\n  },\n  medium: {\n    vaultPredictionVal0: 4132.04,\n    probExpVal0: -1.401,\n    probExpVal1: -5.733\n  },\n  large: {\n    vaultPredictionVal0: 4132.04 + 330.19,\n    probExpVal0: -2.191,\n    probExpVal1: -3.775\n  }\n};\n\nconst vaultPredictionVal1 = (ri: RegressionInfo) =>\n  -287.45 * ri.ata + -0.37 * ri.clr + -20.39 * ri.se + -4.82 * ri.age;\n\nconst compression = ({\n  ata,\n  lensSize\n}: {\n  ata: number;\n  lensSize: number;\n}): number => lensSize - ata;\n\nconst probExpFactor0 = ({\n  ri,\n  lensSize\n}: {\n  ri: RegressionInfo;\n  lensSize: number;\n}) =>\n  0.028 * ri.age -\n  0.506 * compression({ ata: ri.ata, lensSize: lensSize }) +\n  0.005 * ri.clr +\n  0.202 * ri.se;\n\nconst probExpFactor1 = ({\n  ri,\n  lensSize\n}: {\n  ri: RegressionInfo;\n  lensSize: number;\n}) =>\n  -0.076 * ri.age +\n  3.721 * compression({ ata: ri.ata, lensSize: lensSize }) +\n  0.0 * ri.clr -\n  0.164 * ri.se;\n\nexport const vaultPrediction = ({\n  ri,\n  lensSizeId\n}: {\n  ri: RegressionInfo;\n  lensSizeId: LensSizeId;\n}): number =>\n  RegressionLensSizes[lensSizeId].vaultPredictionVal0 + vaultPredictionVal1(ri);\n\nexport const cornea2endothelium = ({\n  ri,\n  lensSizeId\n}: {\n  ri: RegressionInfo;\n  lensSizeId: LensSizeId;\n}): number => ri.acd - (220 + vaultPrediction({ ri, lensSizeId })) / 1000;\n\nexport const probability = ({\n  ri,\n  lensSizeId\n}: {\n  ri: RegressionInfo;\n  lensSizeId: LensSizeId;\n}) =>\n  1 /\n  (1 +\n    Math.exp(\n      RegressionLensSizes[lensSizeId].probExpVal0 +\n        probExpFactor0({ ri: ri, lensSize: LENS_SIZES_MAP[lensSizeId].value })\n    ) +\n    Math.exp(\n      RegressionLensSizes[lensSizeId].probExpVal1 +\n        probExpFactor1({ ri: ri, lensSize: LENS_SIZES_MAP[lensSizeId].value })\n    ));\n","import {\n  RegressionInfo,\n  cornea2endothelium,\n  vaultPrediction\n} from './formulas';\n\nimport { LENS_SIZES } from '../matrix/data';\nimport { round } from '../formulas';\n\nexport const VaultPrediction = (values: RegressionInfo) => (\n  <>\n    <h4>Vault Prediction</h4>\n    <table className=\"table table-bordered table-hover\">\n      <thead>\n        <tr>\n          <th scope=\"col\" className=\"col-4\">\n            Lens Size\n          </th>\n          <th scope=\"col\" className=\"col-4 text-right\">\n            Vault (μm)\n          </th>\n          <th scope=\"col\" className=\"col-4 text-right\">\n            Corneal Endothelium to ICL (mm)\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {LENS_SIZES.map((size) => (\n          <tr key={size.id}>\n            <th scope=\"col\" className=\"col-4\">\n              {size.label}\n            </th>\n            <td className=\"col-4 text-right\">\n              {round(\n                vaultPrediction({\n                  ri: values,\n                  lensSizeId: size.id\n                })\n              )}\n            </td>\n            <td className=\"col-4 text-right\">\n              {round(\n                cornea2endothelium({\n                  ri: values,\n                  lensSizeId: size.id\n                })\n              )}\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  </>\n);\n","import { RegressionInfo, probability } from './formulas';\n\nimport { LENS_SIZES } from '../matrix/data';\nimport { round } from '../formulas';\n\nexport const VaultProbability = (values: RegressionInfo) => (\n  <>\n    <h4>{'Probability of 250 < Vault < 1000 (μm)'}</h4>\n    <table className=\"table table-bordered table-hover\">\n      <thead>\n        <tr>\n          <th scope=\"col\" className=\"col-4\">\n            Lens Size\n          </th>\n          <th scope=\"col\" className=\"col-4 text-right\">\n            Probability (%)\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {LENS_SIZES.map((size) => (\n          <tr key={size.id}>\n            <th scope=\"col\" className=\"col-4\">\n              {size.label}\n            </th>\n            <td className=\"col-4 text-right\">\n              {round(\n                probability({\n                  ri: values,\n                  lensSizeId: size.id\n                }) * 100,\n                1\n              )}\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  </>\n);\n","import { RegressionInfo } from './formulas';\nimport { VaultPrediction } from './VaultPrediction';\nimport { VaultProbability } from './VaultProbability';\n\nexport const Regression = (values: RegressionInfo) => (\n  <>\n    <div className=\"row\">\n      <div className=\"col-md-6\">\n        <VaultPrediction {...values} />\n      </div>\n    </div>\n    <hr />\n    <div className=\"row\">\n      <div className=\"col-md-5\">\n        <VaultProbability {...values} />\n      </div>\n    </div>\n  </>\n);\n","import { NavLink } from 'react-router-dom';\n\ninterface Link {\n  to: string;\n  label: string;\n}\n\nconst LINKS: Link[] = [\n  {\n    to: '/',\n    label: 'Patient'\n  },\n  {\n    to: '/normality',\n    label: 'Biometric Normality'\n  },\n  {\n    to: '/matrix',\n    label: 'Floating Matrix'\n  },\n  {\n    to: '/regression',\n    label: 'Regression'\n  }\n];\n\nexport const TabLinks = () => (\n  <ul className=\"nav nav-pills\" style={{ marginBottom: '1rem' }}>\n    {LINKS.map((link, index) => (\n      <li className=\"nav-item\" key={index}>\n        <NavLink\n          exact={true}\n          className=\"nav-link\"\n          activeClassName=\"active\"\n          to={link.to}\n        >\n          {link.label}\n        </NavLink>\n      </li>\n    ))}\n  </ul>\n);\n","import { Formik, FormikState } from 'formik';\nimport { ICLInputs, INITIAL_VALUES } from './types';\nimport { Route, HashRouter as Router, Switch } from 'react-router-dom';\n\nimport { Footer } from './misc/Footer';\nimport GA from './misc/GoogleAnalytics';\nimport { ICLSchema } from './ICLSchema';\nimport { Matrix } from './matrix';\nimport { NavBar } from './misc/NavBar';\nimport { Normality } from './normality';\nimport { Patient } from './patient';\nimport { Regression } from './regression';\nimport { TabLinks } from './misc/TabLinks';\nimport { calcICLSphericalEquivalent } from './formulas';\n\nconst TabContent = ({\n  errors,\n  touched,\n  values,\n  ...otherProps\n}: FormikState<ICLInputs>) => (\n  <Switch>\n    <Route path=\"/normality\">\n      <Normality\n        ata={values.biometry.ata}\n        clr={values.biometry.clr}\n        acd={values.biometry.acd}\n        aca={(values.biometry.acan + values.biometry.acat) / 2.0}\n        wtw={values.biometry.wtw}\n        age={values.patient.age()}\n      />\n    </Route>\n    <Route path=\"/matrix\">\n      <Matrix ata={values.biometry.ata} clr={values.biometry.clr} />\n    </Route>\n    <Route path=\"/regression\">\n      <Regression\n        acd={values.biometry.acd}\n        ata={values.biometry.ata}\n        clr={values.biometry.clr}\n        se={calcICLSphericalEquivalent(values)}\n        age={values.patient.age()}\n      />\n    </Route>\n    <Route path=\"/\">\n      <Patient\n        values={values}\n        errors={errors}\n        touched={touched}\n        {...otherProps}\n      />\n    </Route>\n  </Switch>\n);\n\nexport const ICLContainer = () => (\n  <Formik\n    initialValues={INITIAL_VALUES}\n    validationSchema={ICLSchema}\n    onSubmit={\n      /* istanbul ignore next */\n      () => {}\n    }\n  >\n    {({ errors, touched, values, resetForm, ...otherProps }) => (\n      <>\n        <NavBar resetForm={resetForm} />\n        <div className=\"container\">\n          {GA.init()}\n          <Router hashType=\"noslash\">\n            <TabLinks />\n            <hr />\n            <TabContent\n              values={values}\n              errors={errors}\n              touched={touched}\n              {...otherProps}\n            />\n          </Router>\n        </div>\n        <Footer />\n      </>\n    )}\n  </Formik>\n);\n","import { ICLContainer } from './ICLContainer';\n\nconst App = () => <ICLContainer />;\n\nexport default App;\n","import './App.scss';\n\nimport * as Sentry from '@sentry/react';\n\nimport App from './App';\nimport { Integrations } from '@sentry/tracing';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nif (process.env.NODE_ENV === 'production') {\n  Sentry.init({\n    dsn:\n      'https://2e937d9ae4044696992e8d4afba8d9b5@o551236.ingest.sentry.io/5674476',\n    integrations: [new Integrations.BrowserTracing()],\n\n    // Set tracesSampleRate to 1.0 to capture 100%\n    // of transactions for performance monitoring.\n    // We recommend adjusting this value in production\n    tracesSampleRate: 1.0\n  });\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}